<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- LINKS -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@1,600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <!-- SCRIPTS -->
  <script src="https://use.fontawesome.com/8877301646.js"></script>
  <script src="https://rawgit.com/ethereum/web3.js/0.16.0/dist/web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethjs@0.3.0/dist/ethjs.min.js"></script>
  <script language="javascript" type="text/javascript" src="web3.min.js"></script>
  <script src="app.js" defer></script>
  <!-- TITLE -->
  <title>Document</title>
</head>

<body>
  <!--=============================================-->
  <!-- NAVARB -->
  <!--=============================================-->
  <nav class="navbar">
    <div class="title">
      <h6>Monkey Claw</h6>
      <i class="fa fa-question" aria-hidden="true"></i>
    </div>
  </nav>

  <!--=============================================-->
  <!-- MAIN -->
  <!--=============================================-->
  <div class="main">
    <div class="register">
      <h6>Register</h6>
      <div class="divider"></div>
      <form class="register-form" action="">

        <div class="repository-name">
          <input type="text" placeholder="Repository Name">
          <i class="fa fa-github" style="font-size: 1.25rem"></i>
        </div>

        <div class="repository-author">
          <input type="text" placeholder="Repository Author">
          <i class="fa fa-address-card" style="font-size: 1.25rem"></i>
        </div>

        <div class="pr-number">
          <input type="text" placeholder="PR number">
          <i class="fa fa-pencil-square-o" style="font-size: 1.25rem"></i>
        </div>

      </form>

      <button class="btn-register">Submit</button>
    </div>

    <div class="farm">
      <h6>Farm</h6>
      <div class="divider"></div>
      <form class="farm-form" action="">

        <div class="pr-number">
          <input type="text" placeholder="PR number">
          <i class="fa fa-pencil-square-o" style="font-size: 1.25rem"></i>
        </div>

      </form>

      <button class="btn-farm">Submit</button>
    </div>

    <div class="call-oracle">
      <h6>Call Oracle</h6>
      <div class="divider"></div>
      <form class="oracle-form" action="">

        <div class="id-number">
          <input type="text" placeholder="Oracle ID">
          <i class="fa fa-pencil-square-o" style="font-size: 1.25rem"></i>
        </div>

      </form>

      <button class="btn-farm">Submit</button>
    </div>
  </div>

  <!--=============================================-->
  <!-- FOOTER -->
  <!--=============================================-->
  <footer class="footer">
    <div class="contact">
      <div class="contact-title">Contact</div>
      <a href="#" class="contact-email">MonkeyClaw@ProtonMail.com</a>
      <a href="#" class="contact-phone">(555) 555-5555</a>
      <div></div>
    </div>
    <div class="copyright">Copyright</div>
    <div class="social-media">
      <div class="social-title">Social Media</div>
      <div class="social-links">
        <a href="#"><i class="fa fa-github"></i></a>
        <a href="#"><i class="fa fa-twitter"></i></a>
        <a href="#"><i class="fa fa-facebook"></i></a>
        <a href="#"><i class="fa fa-youtube-play"></i></a>

      </div>
    </div>
  </footer>

  <!--=============================================-->
  <!-- IMPORTS FROM CRYPTO-ZOMBIE TUTORIAL -->
  <!--=============================================-->
  <div id="txStatus"></div>
  <div id="monkeyPaw"></div>

  <script>
    var monkeyPaw;
    var userAccount;

    // Monkey merge toek address: 0x824Be372A736FA08bA2833bC35F3ed7DA2E0Ee64

    function startApp() {
      var monkeyPawAddress = "0x4316C80D36Bbba4767cb0c13BA56CB72BBe7De49";
      monkeyPaw = new web3js.eth.Contract(monkeyPawABI, monkeyPawAddress);


    function createRandomMonkeyPaw(name) {
      $("#txStatus").text("Creating new monkeyPaw on the blockchain. This may take a while...");
      return monkeyPaw.methods.createRandomMonkeyPaw(name)
        .send({
          from: userAccount
        })
        .on("receipt", function(receipt) {
          $("#txStatus").text("Successfully created " + name + "!");
          getMonkeyPawByOwner(userAccount).then(displayMonkeyPaw);
        })
        .on("error", function(error) {
          console.log("Did not work")
        });
    }



    function getMonkeyPawDetails(id) {
      return monkeyPaw.methods.monkeyPaw(id).call()
    }

    function monkeyPawToOwner(id) {
      return monkeyPaw.methods.monkeyPawToOwner(id).call()
    }

    function getMonkeyPawByOwner(owner) {
      return monkeyPaw.methods.getMonkeyPawByOwner(owner).call()
    }

    window.addEventListener('load', function() {
      if (typeof web3 !== 'undefined') {
        web3js = new Web3(web3.currentProvider);
      } else {
      console.log("No METAMASK")
      }
      startApp()
    })
  </script>

</body>

<script src="https://cdn.jsdelivr.net/gh/mathusummut/confetti.js/confetti.min.js"></script>

</html>
